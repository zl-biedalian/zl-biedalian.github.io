<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>nodeJs学习 | 小火柴的博客笔记</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="个人使用的笔记">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.b02af158.css" as="style"><link rel="preload" href="/assets/js/app.df697a22.js" as="script"><link rel="preload" href="/assets/js/2.7d83501e.js" as="script"><link rel="preload" href="/assets/js/17.8b12949a.js" as="script"><link rel="prefetch" href="/assets/js/10.e240a3f3.js"><link rel="prefetch" href="/assets/js/11.575cb3b0.js"><link rel="prefetch" href="/assets/js/12.3ff991d5.js"><link rel="prefetch" href="/assets/js/13.26c49407.js"><link rel="prefetch" href="/assets/js/14.c6bbd5c7.js"><link rel="prefetch" href="/assets/js/15.ddd33f09.js"><link rel="prefetch" href="/assets/js/16.b50e0d90.js"><link rel="prefetch" href="/assets/js/18.78f9b568.js"><link rel="prefetch" href="/assets/js/19.6c28fb1c.js"><link rel="prefetch" href="/assets/js/20.c55312e1.js"><link rel="prefetch" href="/assets/js/21.6240c172.js"><link rel="prefetch" href="/assets/js/22.7a0531a9.js"><link rel="prefetch" href="/assets/js/23.0e8e3223.js"><link rel="prefetch" href="/assets/js/24.ae4b27cd.js"><link rel="prefetch" href="/assets/js/25.267d5425.js"><link rel="prefetch" href="/assets/js/26.0b7f1791.js"><link rel="prefetch" href="/assets/js/27.ad9b7815.js"><link rel="prefetch" href="/assets/js/28.01c71cdd.js"><link rel="prefetch" href="/assets/js/29.a43249ca.js"><link rel="prefetch" href="/assets/js/3.e698f975.js"><link rel="prefetch" href="/assets/js/30.5946cdb6.js"><link rel="prefetch" href="/assets/js/31.4ed5e15b.js"><link rel="prefetch" href="/assets/js/32.a6c4036d.js"><link rel="prefetch" href="/assets/js/33.32bd6b2e.js"><link rel="prefetch" href="/assets/js/34.b352a9bb.js"><link rel="prefetch" href="/assets/js/35.ba56cab8.js"><link rel="prefetch" href="/assets/js/36.54dc1f48.js"><link rel="prefetch" href="/assets/js/37.dd279648.js"><link rel="prefetch" href="/assets/js/38.536ec31f.js"><link rel="prefetch" href="/assets/js/4.ab898f5f.js"><link rel="prefetch" href="/assets/js/5.e7a2e834.js"><link rel="prefetch" href="/assets/js/6.0e33ec81.js"><link rel="prefetch" href="/assets/js/7.4115f5e1.js"><link rel="prefetch" href="/assets/js/8.3652c984.js"><link rel="prefetch" href="/assets/js/9.5d06d064.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b02af158.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/head.jpg" alt="小火柴的博客笔记" class="logo"> <span class="site-name can-hide">小火柴的博客笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/3eb294/" class="nav-link">学过的习</a></div><div class="nav-item"><a href="/pages/3fea03/" class="nav-link">踩过的坑</a></div><div class="nav-item"><a href="/pages/9a1e83/" class="nav-link">想过的事</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/3eb294/" class="nav-link">学过的习</a></div><div class="nav-item"><a href="/pages/3fea03/" class="nav-link">踩过的坑</a></div><div class="nav-item"><a href="/pages/9a1e83/" class="nav-link">想过的事</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>学过的习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e24a44/" class="sidebar-link">CSS的样式优先级权重</a></li><li><a href="/pages/7873d2/" class="sidebar-link">事件冒泡和事件捕获</a></li><li><a href="/pages/9c2bfc/" class="sidebar-link">js模块可以通过两种方式对外暴露函数</a></li><li><a href="/pages/991cc6/" class="sidebar-link">js中的内存泄漏和内存溢出</a></li><li><a href="/pages/cc931f/" class="sidebar-link">js作用域链</a></li><li><a href="/pages/17c816/" class="sidebar-link">控制台暴露vue</a></li><li><a href="/pages/515843/" class="sidebar-link">es5常用知识总结</a></li><li><a href="/pages/34049a/" class="sidebar-link">es6常用知识总结</a></li><li><a href="/pages/29f30f/" class="sidebar-link">es7常用知识总结</a></li><li><a href="/pages/6616c2/" class="sidebar-link">js模块化</a></li><li><a href="/pages/937e4b/" aria-current="page" class="active sidebar-link">nodeJs学习</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/0a1991/" class="sidebar-link">node搭建服务器</a></li><li><a href="/pages/fc31e6/" class="sidebar-link">webPack学习</a></li><li><a href="/pages/debc20/" class="sidebar-link">js原型对象和原型链的理解</a></li><li><a href="/pages/8e9745/" class="sidebar-link">css阻塞与js阻塞</a></li><li><a href="/pages/9be584/" class="sidebar-link">ajax的学习</a></li><li><a href="/pages/4f10b9/" class="sidebar-link">浏览器的重绘与重排</a></li><li><a href="/pages/1273e8/" class="sidebar-link">函数防抖与函数节流学习记录</a></li><li><a href="/pages/0acb8e/" class="sidebar-link">浏览器储存学习</a></li><li><a href="/pages/3eb294/" class="sidebar-link">React起步</a></li><li><a href="/pages/a87c4e/" class="sidebar-link">React的基本使用</a></li><li><a href="/pages/3dc609/" class="sidebar-link">React项目搭建</a></li><li><a href="/pages/07bbe9/" class="sidebar-link">vue中attrs和listeners的使用</a></li><li><a href="/pages/44df8d/" class="sidebar-link">js的精度问题</a></li><li><a href="/pages/91d1b5/" class="sidebar-link">React的状态管理</a></li><li><a href="/pages/b3a247/" class="sidebar-link">yarn和npm的对比</a></li><li><a href="/pages/37e8bf/" class="sidebar-link">websocket的使用</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>想过的事</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>踩过的坑</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-a872faba><div class="articleInfo" data-v-a872faba><ul class="breadcrumbs" data-v-a872faba><li data-v-a872faba><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-a872faba></a></li> <li data-v-a872faba><span data-v-a872faba>前端</span></li><li data-v-a872faba><span data-v-a872faba>学过的习</span></li></ul> <div class="info" data-v-a872faba><div title="作者" class="author iconfont icon-touxiang" data-v-a872faba><a href="/img/彦祖.png" target="_blank" title="作者" class="beLink" data-v-a872faba>小火柴</a></div> <!----> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="/img/文章标题图标.png">nodeJs学习<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h3 id="知识储备"><a href="#知识储备" class="header-anchor">#</a> 知识储备</h3> <p>1.命令行窗口</p> <div class="language- extra-class"><pre><code>   目录
		. 表示当前目录
		.. 表示上一级目录
	
   常用的指令：
		dir 列出当前目录下的所有文件
		cd 目录名 进入到指定的目录
		md 目录名 创建一个文件夹
		rd 目录名 删除一个文件夹	
	
   环境变量（windows系统中变量）	
   path
		C:\work\jdk\jdk1.7.0_75/bin;
		。。。。
		C:\Users\zl\Desktop\hello
		
	      当我们在命令行窗口打开一个文件，或调用一个程序时，
	系统会首先在当前目录下寻找文件程序，如果找到了则直接打开
	如果没有找到则会依次到环境变量path的路径中寻找，直到找到
	为止如果没找到则报错所以我们可以将一些经常需要访问的程序
	和文件的路径添加到path中，这样我们就可以在任意位置来访问
	这些文件和程序了
</code></pre></div><p>2、I/O (Input/Output)，I/O操作指的是对磁盘的读写操作</p> <h3 id="node是什么"><a href="#node是什么" class="header-anchor">#</a> Node是什么</h3> <p>1、node是一款对ES标准实现的JS引擎</p> <p>2、通过node可以使js在服务器中运行</p> <p>3、node就是一款使用js编写的web服务器</p> <p>4、node底层是使用c++的编写的</p> <p>5、node的中js引擎使用的chrome的v8引擎</p> <p>6、node的特点：</p> <ul><li>a.非阻塞、异步的I/O</li> <li>b.事件和回调函数</li> <li>c.单线程（主线程单线程，后台I/O线程池）</li> <li>d.跨平台</li></ul> <h3 id="模块化"><a href="#模块化" class="header-anchor">#</a> 模块化</h3> <p>1、ES5中没有原生支持模块化，我们只能通过script标签引入js文件来实现模块化,ES6内置了模块化，定义暴露模块 : export</p> <p>2、在node中为了对模块管理，引入了CommonJS规范</p> <p>3、模块的引用</p> <div class="language- extra-class"><pre><code>		使用 require()函数来引入一个模块
	    如：var 变量 = require(&quot;模块的标识&quot;);
</code></pre></div><p>4、模块的标识</p> <div class="language- extra-class"><pre><code>       模块的标识就是模块的名字或路径，我们node通过模块的标识来寻找模块的
	   对于核心模块（npm中下载的模块），直接使用模块的名字
</code></pre></div><p>5、模块的定义</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>     在node中一个js文件就是一个模块， 默认情况下在js文件中编写的内容，都是运行在一个独立的函数中，外部的模块无法访问，但是我们可以导出变量和函数。
   
     导出变量和函数
     <span class="token number">1</span>、使用 exports 
     例子：
			exports<span class="token punctuation">.</span>属性 <span class="token operator">=</span> 属性值<span class="token punctuation">;</span>
			exports<span class="token punctuation">.</span>方法 <span class="token operator">=</span> 函数<span class="token punctuation">;</span>
							
     <span class="token number">2</span>、使用module<span class="token punctuation">.</span>exports
     例子：
		    module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>属性 <span class="token operator">=</span> 属性值<span class="token punctuation">;</span>
			module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>方法 <span class="token operator">=</span> 函数<span class="token punctuation">;</span>
			module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
			
     对其进行引入
			<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		


				
     对于自定义的文件模块，需要通过文件的路径来对模块进行引入，路径可以是绝对路径，如果是相对路径必须以<span class="token punctuation">.</span><span class="token operator">/</span>或 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>开头
	    	<span class="token keyword">var</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./router&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">]</span>
	<span class="token function">在node中，通过require</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数来引入外部的模块
		<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span>可以传递一个文件的路径作为参数，node将会自动根据该路径来引入外部模块
		这里路径，如果使用相对路径，必须以<span class="token punctuation">.</span>或<span class="token punctuation">.</span><span class="token punctuation">.</span>开头

	<span class="token function">使用require</span><span class="token punctuation">(</span><span class="token punctuation">)</span>引入模块以后，该函数会返回一个对象，这个对象代表的是引入的模块
	<span class="token function">我们使用require</span><span class="token punctuation">(</span><span class="token punctuation">)</span>引入外部模块时，使用的就是模块标识，我们可以通过模块标识来找到指定的模块
    模块分成两大类
		核心模块
			<span class="token operator">-</span> 由node引擎提供的模块
			<span class="token operator">-</span> 核心模块的标识就是，模块的名字
		文件模块
			<span class="token operator">-</span> 由用户自己创建的模块
			<span class="token operator">-</span> 文件模块的标识就是文件的路径（绝对路径，相对路径）
				相对路径使用<span class="token punctuation">.</span>或<span class="token punctuation">.</span><span class="token punctuation">.</span>开头






	在node中有一个全局对象 global，它的作用和网页中window类似
		在全局中创建的变量都会作为global的属性保存
		在全局中创建的函数都会作为global的方法保存
		

	当node在执行模块中的代码时，它会首先在代码的最顶部，添加如下代码
 			<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> __dirname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   在代码的最底部，添加如下代码
 			<span class="token punctuation">}</span>

 	实际上模块中的代码都是包装在一个函数中执行的，并且在函数执行时，同时传递进了<span class="token number">5</span>个实参
		 exports
		 	<span class="token operator">-</span> 该对象用来将变量或函数暴露到外部
		 	 
		 require
		 	<span class="token operator">-</span> 函数，用来引入外部的模块

		 module
		 	<span class="token operator">-</span> module代表的是当前模块本身
		 	<span class="token operator">-</span> exports就是module的属性
		 	<span class="token operator">-</span> 既可以使用 exports 导出，也可以使用module<span class="token punctuation">.</span>exports导出
		 	 
		 __filename
 			<span class="token constant">C</span><span class="token operator">:</span>\Users\zl\WebstormProjects\class0705\<span class="token number">01</span><span class="token punctuation">.</span>node\<span class="token number">04</span><span class="token punctuation">.</span>module<span class="token punctuation">.</span>js
 			<span class="token operator">-</span> 当前模块的完整路径

	  	 __dirname
 			<span class="token constant">C</span><span class="token operator">:</span>\Users\zl\WebstormProjects\class0705\<span class="token number">01</span><span class="token punctuation">.</span>node
 			<span class="token operator">-</span> 当前模块所在文件夹的完整路径



   	exports 和 module<span class="token punctuation">.</span>exports
		<span class="token operator">-</span> 通过exports只能使用<span class="token punctuation">.</span>的方式来向外暴露内部变量
			exports<span class="token punctuation">.</span>xxx <span class="token operator">=</span> xxx

		<span class="token operator">-</span> 而module<span class="token punctuation">.</span>exports既可以通过<span class="token punctuation">.</span>的形式，也可以直接赋值
			module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>xxx <span class="token operator">=</span> xxxx
			module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="npm的命令"><a href="#npm的命令" class="header-anchor">#</a> npm的命令</h3> <p>通过npm下载的包都放到node_modules文件夹中,我们通过npm下载的包，直接通过包名引入即可。node在使用模块名字来引入模块时，它会首先在当前目录的node_modules中寻找是否含有该模块
1、如果有则直接使用，如果没有则去上一级目录的node_modules中寻找
2、如果有则直接使用，如果没有则再去上一级目录寻找，直到找到为止
3、直到找到磁盘的根目录，如果依然没有，则报错</p> <div class="language-shell extra-class"><pre class="language-shell"><code>	 <span class="token function">npm</span> -v 查看npm的版本
	 <span class="token function">npm</span> version 查看所有模块的版本
	 <span class="token function">npm</span> search 包名 搜索包
	 <span class="token function">npm</span> <span class="token function">install</span> / i 包名 安装包
	 <span class="token function">npm</span> remove / r 包名 删除包
	 <span class="token function">npm</span> <span class="token function">install</span> 包名 --save 安装包并添加到依赖中
	 <span class="token function">npm</span> <span class="token function">install</span> 下载当前项目所依赖的包
	 <span class="token function">npm</span> <span class="token function">install</span> 包名 -g 全局安装包（全局安装的包一般都是一些工具）
</code></pre></div><h3 id="包-package"><a href="#包-package" class="header-anchor">#</a> 包（package）</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>将多个模块组合为一个完整的功能，就是一个包
包结构
	bin：
		 二进制的可执行文件，一般都是一些工具包中才有
	lib：
		 js文件
	doc：
		 文档
	test：
		 测试代码
	<span class="token keyword">package</span><span class="token punctuation">.</span>json：
		 包的描述文件
		
    <span class="token keyword">package</span><span class="token punctuation">.</span>json<span class="token operator">:</span>
	    它是一个json格式的文件，在它里面保存了包各种相关的信息
		     name 包名
		     version 版本
	     	 dependencies 依赖
	    	 main 包的主要的文件
		     bin 可执行文件
</code></pre></div><h3 id="文件系统-file-system"><a href="#文件系统-file-system" class="header-anchor">#</a> 文件系统（File System）</h3> <p>1、Buffer（缓冲区）
Buffer和数组的结构的非常类似，Buffer是用来存储二进制数据的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> Buffer的方法：
	 Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>字符串<span class="token punctuation">)</span><span class="token operator">:</span>将一个字符串中内容保存到一个buffer中
	  
     buf<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> 将buffer转换为一个字符串
     
     Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>：创建一个指定大小的buffer对象
     
     Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>：创建一个指定大小的buffer对象，可以包含敏感数据（未将创建的内存区域的清空）
</code></pre></div><p>更多内容：<a href="http://nodejs.cn/api/buffer.html" target="_blank" rel="noopener noreferrer">Node官网 方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>2、fs模块
在Node通过fs模块来对系统中的文件进行操作，fs模块是node中已经继承好了，不需要在使用npm下载，直接引入即可</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1</span>、引入fs
	  <span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
<span class="token number">2</span>、fs模块中的大部分操作都提供了两种方法，同步方法和异步方法
       同步方法带sync
	   异步方法没有sync，都需要回调函数

		
<span class="token number">3</span>、方法（ 带sync的都是同行的方法，有callback回调函数的都是异步方法）
   打开文件
      fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> flags<span class="token punctuation">[</span><span class="token punctuation">,</span> mode<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
      fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> flags<span class="token punctuation">[</span><span class="token punctuation">,</span> mode<span class="token punctuation">]</span><span class="token punctuation">)</span>
   关闭文件
      fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
      fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span>


   写入文件
   
	    <span class="token number">1.</span>同步写入
	       fs<span class="token punctuation">.</span><span class="token function">writeSync</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">[</span><span class="token punctuation">,</span> position<span class="token punctuation">]</span><span class="token punctuation">)</span>
           fs<span class="token punctuation">.</span><span class="token function">writeSync</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> position<span class="token punctuation">[</span><span class="token punctuation">,</span> encoding<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
           <span class="token function">要完成同步写入文件，先需要通过openSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">打开文件来获取一个文件描述符，然后在通过writeSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>写入文件。
           参数： – fd <span class="token function">文件描述符，通过openSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>获取
                 – data 要写入的数据（String 或 Buffer）
                 – offset buffer写入的偏移量
                 – length 写入的长度
                 – position 写入的起始位置
                 – encoding 写入编码
                 
		<span class="token number">2.</span>异步写入
          fs<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">[</span><span class="token punctuation">,</span> position<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
          fs<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> position<span class="token punctuation">[</span><span class="token punctuation">,</span> encoding<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
          <span class="token function">要使用异步写入文件，先需要通过open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">打开文件，然后在回调函数中通过write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>写入。
          参数： – fd 文件描述符
				– data 要写入的数据（String 或 Buffer）
				– offset buffer写入的偏移量
				– length 写入的长度
				– position 写入的起始位置
				– encoding 写入编码
					
		<span class="token number">3.</span>简单写入
			fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
		    参数：  – file 文件路径
	               – data 被写入的内容，可以是String或Buffer
	               – options 对象，包含属性（encoding、mode、flag）
	               – callback 回调
		               
		<span class="token number">4.</span>流式写入
		往一个文件中写入大量数据时，最好的方法之一是使用流。
        若要将数据异步传送到文件，首需要使用以下语法创建一个Writable对象：
        fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
              <span class="token operator">-</span>path 文件路径
              <span class="token operator">-</span>options <span class="token punctuation">{</span><span class="token literal-property property">encoding</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">flag</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
        一旦你打开了Writable文件流，就可以使用
        <span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">方法来写入它，写入完成后，再调用end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法来关闭流



 读取文件
		<span class="token number">1.</span>同步读取
		   fs<span class="token punctuation">.</span><span class="token function">readSync</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">,</span> position<span class="token punctuation">)</span>
           参数：
				<span class="token operator">-</span>fd 文件描述符
				<span class="token operator">-</span>buffer 读取文件的缓冲区
				<span class="token operator">-</span>offset buffer的开始写入的位置
				<span class="token operator">-</span>length 要读取的字节数
				<span class="token operator">-</span>position 开始读取文件的位置
				
			
		<span class="token number">2.</span>异步读取
		   fs<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">,</span> position<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
	       参数：
				<span class="token operator">-</span>fd 文件描述符
				<span class="token operator">-</span>buffer 读取文件的缓冲区
				<span class="token operator">-</span>offset buffer的开始写入的位置
				<span class="token operator">-</span>length 要读取的字节数
				<span class="token operator">-</span>position 开始读取文件的位置
				<span class="token operator">-</span>callback 回调函数 参数err <span class="token punctuation">,</span> bytesRead <span class="token punctuation">,</span> buffer


		<span class="token number">3.</span>简单读取
           fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>file<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
           fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>file<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
		   <span class="token literal-property property">参数</span><span class="token operator">:</span>    <span class="token operator">-</span>file 文件路径或文件描述符
		           <span class="token operator">-</span>options <span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>String<span class="token operator">&gt;</span>
		           <span class="token operator">-</span>encoding <span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>Null<span class="token operator">&gt;</span> 默认 <span class="token operator">=</span> <span class="token keyword">null</span>
		           <span class="token operator">-</span>flag <span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> 默认 <span class="token operator">=</span> <span class="token string">'r'</span>
		           <span class="token operator">-</span>callback 回调函数，有两个参数err 、data


		<span class="token number">4.</span>流式读取
           从一个文件中读取大量的数据时，最好的方法之一就是流式读取，这样将把一个文件作为Readable流的形式打开。要从异步从文件传输数据，首先需要通过以下语法创建一个Readable流对象：
           fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
           <span class="token operator">-</span>path 文件路径
           <span class="token operator">-</span>options <span class="token punctuation">{</span><span class="token literal-property property">encoding</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">flag</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
           
           <span class="token function">当你打开Readable文件流以后，可以通过readable事件和read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>请求，或通过data事件处理程序轻松地从它读出。


其他方法：
        验证路径是否存在
        – fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
        
        获取文件信息
		– fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		– fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
		
		删除文件
		– fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		– fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
		
		列出文件
		– fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		– fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
		
		截断文件
		– fs<span class="token punctuation">.</span><span class="token function">truncate</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> len<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		– fs<span class="token punctuation">.</span><span class="token function">truncateSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> len<span class="token punctuation">)</span>
		
		建立目录
		– fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> mode<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		– fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> mode<span class="token punctuation">]</span><span class="token punctuation">)</span>
		
		删除目录
		– fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		– fs<span class="token punctuation">.</span><span class="token function">rmdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
		
		重命名文件和目录
		– fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span>oldPath<span class="token punctuation">,</span> newPath<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		– fs<span class="token punctuation">.</span><span class="token function">renameSync</span><span class="token punctuation">(</span>oldPath<span class="token punctuation">,</span> newPath<span class="token punctuation">)</span>
		
		监视文件更改写入
		– fs<span class="token punctuation">.</span><span class="token function">watchFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
					
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20200916102708477.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwODQ0NjYy,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p>更多官方方法：<a href="http://nodejs.cn/api/fs.html" target="_blank" rel="noopener noreferrer">Node官网 方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>代码：</p> <p>1、Buffer(缓冲区)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token operator">-</span> Buffer的结构和数组很像，操作的方法也和数组类似
	<span class="token operator">-</span> 数组中不能存储二进制的文件，而buffer就是专门用来存储二进制数据
	<span class="token operator">-</span> 使用buffer不需要引入模块，直接使用即可
	<span class="token operator">-</span> 在buffer中存储的都是二进制数据，但是在显示时都是以<span class="token number">16</span>进制的形式显示
	buffer中每一个元素的范围是从<span class="token number">00</span> <span class="token operator">-</span> ff   <span class="token number">0</span> <span class="token operator">-</span> <span class="token number">255</span>
	<span class="token number">00000000</span> <span class="token operator">-</span> <span class="token number">11111111</span>

	计算机 一个<span class="token number">0</span> 或一个<span class="token number">1</span> 我们称为<span class="token number">1</span>位（bit）

	8bit <span class="token operator">=</span> 1byte（字节）
	1024byte <span class="token operator">=</span> 1kb
	1024kb <span class="token operator">=</span> 1mb
	1024mb <span class="token operator">=</span> 1gb
	1024gb <span class="token operator">=</span> 1tb

	buffer中的一个元素，占用内存的一个字节
   	Buffer的大小一旦确定，则不能修改，Buffer实际上是对底层内存的直接操作

	<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello 尚硅谷&quot;</span><span class="token punctuation">;</span>
	
	<span class="token comment">//将一个字符串保存到buffer中</span>
	<span class="token keyword">var</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//console.log(buf.length); //占用内存的大小</span>
	<span class="token comment">//console.log(str.length);//字符串的长度</span>
	<span class="token comment">//console.log(buf);</span>
	
	<span class="token comment">//创建一个指定大小的buffer</span>
	<span class="token comment">//buffer构造函数都是不推荐使用的</span>
	<span class="token comment">//var buf2 = new Buffer(10);//10个字节的buffer</span>
	<span class="token comment">//console.log(buf2.length);</span>

	<span class="token comment">//创建一个10个字节的buffer</span>
	<span class="token keyword">var</span> buf2 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//通过索引，来操作buf中的元素</span>
	buf2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">88</span><span class="token punctuation">;</span>
	buf2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
	buf2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xaa</span><span class="token punctuation">;</span>
	buf2<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>

    只要数字在控制台或页面中输出一定是<span class="token number">10</span>进制
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">;</span> i<span class="token operator">&lt;</span>buf2<span class="token punctuation">.</span>length <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> 创建一个指定大小的buffer，但是buffer中可能含有敏感数据
	<span class="token keyword">var</span> buf3 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf3<span class="token punctuation">)</span><span class="token punctuation">;</span>

	Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> 将一个字符串转换为buffer
	Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> 创建一个指定大小的Buffer
	Buffer<span class="token punctuation">.</span><span class="token function">alloUnsafe</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> 创建一个指定大小的Buffer，但是可能包含敏感数据
 	buf<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 将缓冲区中的数据转换为字符串

   <span class="token keyword">var</span> buf4 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;我是一段文本数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf4<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>2、简单文件写入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
	 fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
	 fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token operator">-</span> file 要操作的文件的路径
		<span class="token operator">-</span> data 要写入的数据
		<span class="token operator">-</span> options 选项，可以对写入进行一些设置
		<span class="token operator">-</span> callback 当写入完成以后执行的函数
	
		<span class="token operator">-</span> flag
			r 只读
			w 可写
			a 追加

	<span class="token comment">//引入fs模块</span>
	<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;hello3.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;这是通过writeFile写入的内容&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">flag</span><span class="token operator">:</span><span class="token string">&quot;r+&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入成功~~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;C:/Users/zl/Desktop/hello.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;这是通过writeFile写入的内容&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">flag</span><span class="token operator">:</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入成功~~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>3、异步文件写入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> flags<span class="token punctuation">[</span><span class="token punctuation">,</span> mode<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		<span class="token operator">-</span> 用来打开一个文件
	   <span class="token operator">-</span> 异步调用的方法，结果都是通过回调函数的参数返回的
		<span class="token operator">-</span> 回调函数两个参数：
			err 错误对象，如果没有错误则为<span class="token keyword">null</span>
			fd  文件的描述符
	fs<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">,</span> position<span class="token punctuation">[</span><span class="token punctuation">,</span> encoding<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		<span class="token operator">-</span> 用来异步写入一个文件
	
	fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
		<span class="token operator">-</span> 用来关闭文件


	<span class="token comment">//引入fs模块</span>
	<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//打开文件</span>
	fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;hello2.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err <span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	
	<span class="token comment">//判断是否出错</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//如果没有出错，则对文件进行写入操作</span>
		fs<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span><span class="token string">&quot;这是异步写入的内容&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入成功~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//关闭文件</span>
			fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd <span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件已关闭~~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;程序向下执行~~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>4、流式文件写入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	同步、异步、简单文件的写入都不适合大文件的写入，性能较差，容易导致内存溢出
	<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	
	<span class="token comment">//流式文件写入</span>
	<span class="token comment">//创建一个可写流</span>
	fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token operator">-</span> 可以用来创建一个可写流
		<span class="token operator">-</span> path，文件路径
		<span class="token operator">-</span> options 配置的参数
	
	<span class="token keyword">var</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&quot;hello3.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//可以通过监听流的open和close事件来监听流的打开和关闭</span>
	<span class="token function">on</span><span class="token punctuation">(</span>事件字符串<span class="token punctuation">,</span>回调函数<span class="token punctuation">)</span>
		<span class="token operator">-</span> 可以为对象绑定一个事件

	<span class="token function">once</span><span class="token punctuation">(</span>事件字符串<span class="token punctuation">,</span>回调函数<span class="token punctuation">)</span>
		<span class="token operator">-</span> 可以为对象绑定一个一次性的事件，该事件将会在触发一次以后自动失效


	ws<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;流打开了~~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	ws<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;流关闭了~~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//通过ws向文件中输出内容</span>
	ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;通过可写流写入文件的内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;this is a test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//关闭流</span>
	ws<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>5、简单文件读取</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	 fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
	 fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
	 	<span class="token operator">-</span> path 要读取的文件的路径
	 	<span class="token operator">-</span> options 读取的选项
	 	<span class="token operator">-</span> <span class="token function">callback回调函数，通过回调函数将读取到内容返回</span><span class="token punctuation">(</span>err <span class="token punctuation">,</span> data<span class="token punctuation">)</span>
	 		err 错误对象
	 		data 读取到的数据，会返回一个Buffer


	<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token string">&quot;C:/Users/zl/Desktop/笔记.mp3&quot;</span><span class="token punctuation">;</span>
	
	fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;an.jpg&quot;</span> <span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err <span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">//console.log(data);</span>
			<span class="token comment">//将data写入到文件中</span>
			fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;C:/Users/zl/Desktop/hello.jpg&quot;</span><span class="token punctuation">,</span>data<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件写入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>6、流式文件读取</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	流式文件读取也适用于一些比较大的文件，可以分多次将文件读取到内存中
    <span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//创建一个可读流</span>
	<span class="token keyword">var</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:/Users/zl/Desktop/xx.mp3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//创建一个可写流</span>
	<span class="token keyword">var</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&quot;a.mp3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//监听流的开启和关闭</span>
	rs<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;可读流打开了~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	rs<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;可读流关闭了~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//数据读取完毕，关闭可写流</span>
		ws<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	ws<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;可写流打开了~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	ws<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;可写流关闭了~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//如果要读取一个可读流中的数据，必须要为可读流绑定一个data事件，data事件绑定完毕，它会自动开始读取数据</span>
	rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//console.log(data);</span>
		<span class="token comment">//将读取到的数据写入到可写流中</span>
		ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>





    <span class="token function">或者使用流式文件的方法pipe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//创建一个可读流</span>
	<span class="token keyword">var</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:/Users/zl/Desktop/09f0sxxx.mp3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//创建一个可写流</span>
	<span class="token keyword">var</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&quot;b.mp3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//pipe()可以将可读流中的内容，直接输出到可写流中</span>
	rs<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre></div></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=node" title="标签">#node</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/6616c2/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">js模块化</div></a> <a href="/pages/0a1991/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">node搭建服务器</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/6616c2/" class="prev">js模块化</a></span> <span class="next"><a href="/pages/0a1991/">node搭建服务器</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>X match</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.df697a22.js" defer></script><script src="/assets/js/2.7d83501e.js" defer></script><script src="/assets/js/17.8b12949a.js" defer></script>
  </body>
</html>
