<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React项目搭建 | 小火柴的博客笔记</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="个人使用的笔记">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.b02af158.css" as="style"><link rel="preload" href="/assets/js/app.df697a22.js" as="script"><link rel="preload" href="/assets/js/2.7d83501e.js" as="script"><link rel="preload" href="/assets/js/28.01c71cdd.js" as="script"><link rel="prefetch" href="/assets/js/10.e240a3f3.js"><link rel="prefetch" href="/assets/js/11.575cb3b0.js"><link rel="prefetch" href="/assets/js/12.3ff991d5.js"><link rel="prefetch" href="/assets/js/13.26c49407.js"><link rel="prefetch" href="/assets/js/14.c6bbd5c7.js"><link rel="prefetch" href="/assets/js/15.ddd33f09.js"><link rel="prefetch" href="/assets/js/16.b50e0d90.js"><link rel="prefetch" href="/assets/js/17.8b12949a.js"><link rel="prefetch" href="/assets/js/18.78f9b568.js"><link rel="prefetch" href="/assets/js/19.6c28fb1c.js"><link rel="prefetch" href="/assets/js/20.c55312e1.js"><link rel="prefetch" href="/assets/js/21.6240c172.js"><link rel="prefetch" href="/assets/js/22.7a0531a9.js"><link rel="prefetch" href="/assets/js/23.0e8e3223.js"><link rel="prefetch" href="/assets/js/24.ae4b27cd.js"><link rel="prefetch" href="/assets/js/25.267d5425.js"><link rel="prefetch" href="/assets/js/26.0b7f1791.js"><link rel="prefetch" href="/assets/js/27.ad9b7815.js"><link rel="prefetch" href="/assets/js/29.a43249ca.js"><link rel="prefetch" href="/assets/js/3.e698f975.js"><link rel="prefetch" href="/assets/js/30.5946cdb6.js"><link rel="prefetch" href="/assets/js/31.4ed5e15b.js"><link rel="prefetch" href="/assets/js/32.a6c4036d.js"><link rel="prefetch" href="/assets/js/33.32bd6b2e.js"><link rel="prefetch" href="/assets/js/34.b352a9bb.js"><link rel="prefetch" href="/assets/js/35.ba56cab8.js"><link rel="prefetch" href="/assets/js/36.54dc1f48.js"><link rel="prefetch" href="/assets/js/37.dd279648.js"><link rel="prefetch" href="/assets/js/38.536ec31f.js"><link rel="prefetch" href="/assets/js/4.ab898f5f.js"><link rel="prefetch" href="/assets/js/5.e7a2e834.js"><link rel="prefetch" href="/assets/js/6.0e33ec81.js"><link rel="prefetch" href="/assets/js/7.4115f5e1.js"><link rel="prefetch" href="/assets/js/8.3652c984.js"><link rel="prefetch" href="/assets/js/9.5d06d064.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b02af158.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/head.jpg" alt="小火柴的博客笔记" class="logo"> <span class="site-name can-hide">小火柴的博客笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/3eb294/" class="nav-link">学过的习</a></div><div class="nav-item"><a href="/pages/3fea03/" class="nav-link">踩过的坑</a></div><div class="nav-item"><a href="/pages/9a1e83/" class="nav-link">想过的事</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/3eb294/" class="nav-link">学过的习</a></div><div class="nav-item"><a href="/pages/3fea03/" class="nav-link">踩过的坑</a></div><div class="nav-item"><a href="/pages/9a1e83/" class="nav-link">想过的事</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>学过的习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e24a44/" class="sidebar-link">CSS的样式优先级权重</a></li><li><a href="/pages/7873d2/" class="sidebar-link">事件冒泡和事件捕获</a></li><li><a href="/pages/9c2bfc/" class="sidebar-link">js模块可以通过两种方式对外暴露函数</a></li><li><a href="/pages/991cc6/" class="sidebar-link">js中的内存泄漏和内存溢出</a></li><li><a href="/pages/cc931f/" class="sidebar-link">js作用域链</a></li><li><a href="/pages/17c816/" class="sidebar-link">控制台暴露vue</a></li><li><a href="/pages/515843/" class="sidebar-link">es5常用知识总结</a></li><li><a href="/pages/34049a/" class="sidebar-link">es6常用知识总结</a></li><li><a href="/pages/29f30f/" class="sidebar-link">es7常用知识总结</a></li><li><a href="/pages/6616c2/" class="sidebar-link">js模块化</a></li><li><a href="/pages/937e4b/" class="sidebar-link">nodeJs学习</a></li><li><a href="/pages/0a1991/" class="sidebar-link">node搭建服务器</a></li><li><a href="/pages/fc31e6/" class="sidebar-link">webPack学习</a></li><li><a href="/pages/debc20/" class="sidebar-link">js原型对象和原型链的理解</a></li><li><a href="/pages/8e9745/" class="sidebar-link">css阻塞与js阻塞</a></li><li><a href="/pages/9be584/" class="sidebar-link">ajax的学习</a></li><li><a href="/pages/4f10b9/" class="sidebar-link">浏览器的重绘与重排</a></li><li><a href="/pages/1273e8/" class="sidebar-link">函数防抖与函数节流学习记录</a></li><li><a href="/pages/0acb8e/" class="sidebar-link">浏览器储存学习</a></li><li><a href="/pages/3eb294/" class="sidebar-link">React起步</a></li><li><a href="/pages/a87c4e/" class="sidebar-link">React的基本使用</a></li><li><a href="/pages/3dc609/" aria-current="page" class="active sidebar-link">React项目搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/3dc609/#react项目搭建" class="sidebar-link">React项目搭建</a></li><li class="sidebar-sub-header level2"><a href="/pages/3dc609/#react项目文件分析" class="sidebar-link">React项目文件分析</a></li><li class="sidebar-sub-header level2"><a href="/pages/3dc609/#react路由使用" class="sidebar-link">React路由使用</a></li></ul></li><li><a href="/pages/07bbe9/" class="sidebar-link">vue中attrs和listeners的使用</a></li><li><a href="/pages/44df8d/" class="sidebar-link">js的精度问题</a></li><li><a href="/pages/91d1b5/" class="sidebar-link">React的状态管理</a></li><li><a href="/pages/b3a247/" class="sidebar-link">yarn和npm的对比</a></li><li><a href="/pages/37e8bf/" class="sidebar-link">websocket的使用</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>想过的事</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>踩过的坑</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-a872faba><div class="articleInfo" data-v-a872faba><ul class="breadcrumbs" data-v-a872faba><li data-v-a872faba><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-a872faba></a></li> <li data-v-a872faba><span data-v-a872faba>前端</span></li><li data-v-a872faba><span data-v-a872faba>学过的习</span></li></ul> <div class="info" data-v-a872faba><div title="作者" class="author iconfont icon-touxiang" data-v-a872faba><a href="/img/彦祖.png" target="_blank" title="作者" class="beLink" data-v-a872faba>小火柴</a></div> <!----> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="/img/文章标题图标.png">React项目搭建<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="react项目搭建"><a href="#react项目搭建" class="header-anchor">#</a> React项目搭建</h2> <p>1、react提供了一个用于创建react项目的脚手架库: create-react-app，使用脚手架搭建项目可以节省时间，它包含了搭建项目所需要的基本的配置（语法检查、jsx编译等等）。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1</span>、全局安装脚手架：npm i <span class="token operator">-</span>g create<span class="token operator">-</span>react<span class="token operator">-</span>app

<span class="token number">2</span>、使用脚手架创建项目：create<span class="token operator">-</span>react<span class="token operator">-</span>app zl<span class="token operator">-</span>react

<span class="token number">3</span>、创建完成后： 
    npm start
       Starts the development server<span class="token punctuation">.</span>
    
    npm run build
       Bundles the app into <span class="token keyword">static</span> files <span class="token keyword">for</span> production<span class="token punctuation">.</span>
    
    npm test
       Starts the test runner<span class="token punctuation">.</span>
    
    npm run eject
       Removes <span class="token keyword">this</span> tool and copies build dependencies<span class="token punctuation">,</span> configuration files
       and scripts into the app directory<span class="token punctuation">.</span> If you <span class="token keyword">do</span> <span class="token keyword">this</span><span class="token punctuation">,</span> you can’t go back<span class="token operator">!</span>


<span class="token number">4</span>、创建完成后项目结构：
    <span class="token keyword">public</span> <span class="token operator">--</span><span class="token operator">--</span> 静态资源文件夹
        favicon<span class="token punctuation">.</span>icon <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> 网站页签图标
        index<span class="token punctuation">.</span>html <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> 主页面
        logo192<span class="token punctuation">.</span>png <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> logo图
        logo512<span class="token punctuation">.</span>png <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> logo图
        manifest<span class="token punctuation">.</span>json <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> 应用加壳的配置文件
        robots<span class="token punctuation">.</span>txt <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> 爬虫协议文件

    src <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> 源码文件夹
        App<span class="token punctuation">.</span>css <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> App组件的样式
        App<span class="token punctuation">.</span>js <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> App组件
        App<span class="token punctuation">.</span>commonJS<span class="token operator">-</span>test1<span class="token punctuation">.</span>js <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> 用于给App做测试
        index<span class="token punctuation">.</span>css <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> 样式
        index<span class="token punctuation">.</span>js <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> 入口文件
        logo<span class="token punctuation">.</span>svg <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> logo图
        reportWebVitals<span class="token punctuation">.</span>js
                        <span class="token operator">--</span><span class="token operator">-</span> <span class="token function">页面性能分析文件</span><span class="token punctuation">(</span>需要web<span class="token operator">-</span>vitals库的支持<span class="token punctuation">)</span>
        setupTests<span class="token punctuation">.</span>js
                       <span class="token operator">--</span><span class="token operator">--</span> <span class="token function">组件单元测试的文件</span><span class="token punctuation">(</span>需要jest<span class="token operator">-</span>dom库的支持<span class="token punctuation">)</span>

</code></pre></div><p><br><br></p> <h2 id="react项目文件分析"><a href="#react项目文件分析" class="header-anchor">#</a> React项目文件分析</h2> <p>1、入口文件分析（index.js）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>
<span class="token comment">//import ReactDOM from 'react-dom'</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>


<span class="token comment">//root是public文件下的index.html的root节点</span>
<span class="token number">1</span>、ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//注：ReactDom的创建方式不同</span>


<span class="token comment">//react-dom V18.0.0只有可以使用的创建方式</span>
<span class="token number">2</span>、<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><br><br>
2、App.jsx 文件</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token comment">//引入React核心库</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">//引入需要展示的组件</span>
<span class="token keyword">import</span> Hello <span class="token keyword">from</span> <span class="token string">'./components/Hello'</span>

<span class="token comment">//将类式组件暴露出去</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><br><br>
3、setupProxy.js代理文件配置，代理相当于中间服务器，主要的目的是解决浏览器的同源策略产生的跨域问题。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span>


module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  
			<span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span> <span class="token comment">//转发的目标服务器</span>
			<span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//解决服务器对请求的识别问题</span>
			<span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'^/api1'</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span>  <span class="token comment">//是否重新确定路径，将/api1去掉</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  
			<span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5001'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'^/api2'</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>注：</strong> 如果不需要转发至不同的域，可以在package.json文件中进行如下的配置</p> <div class="language- extra-class"><pre class="language-text"><code> &quot;proxy&quot;: &quot;http://localhost:5000&quot;
</code></pre></div><p><br><br></p> <h2 id="react路由使用"><a href="#react路由使用" class="header-anchor">#</a> React路由使用</h2> <p>路由主要是通过使用浏览器自身的history对象，监听访问路径的变化，展示和操作页面（通常使用history.js来操作history对象）</p> <br> <p>1、安装、引入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npm install react<span class="token operator">-</span>router<span class="token operator">-</span>dom

<span class="token keyword">import</span> <span class="token punctuation">{</span>
  BrowserRouter<span class="token punctuation">,</span>
  Route<span class="token punctuation">,</span>
  Link
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
</code></pre></div><p><br><br>
react-router-dom 提供了 BrowserRouter 和 HashRouter 路由。
这两个路由都会为你创建一个专门的 history 对象。
一般来说，如果你有一个响应请求的服务器，则你应该使用 BrowserRouter ，
如果你使用的是静态文件的服务器，则应该使用 HashRouter(会在路由的路径上增加#，并且#之后的内容不会转发至服务器)
<br></p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token number">1</span>、React中，使用 Link 或者 NavLink 进行路径的切换，相当于html的a标签，向history栈进行push操作。

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">activeClassName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">activeClassName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span>

注：NavLink相比于Link多了activeClassName，activeStyle等属性，便于标签在被选中的时候增加样式。


<span class="token number">2</span>、注册路由 

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>


<span class="token number">3</span>、使用link标签的时候，需要BrowserRouter 或者 HashRouter进行包裹。
   为了方便，我们一般可以直接加在入口文件的app之上（index<span class="token punctuation">.</span>js）。

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span>


<span class="token number">4</span>、<span class="token keyword">switch</span>标签的使用

未使用前：以下的场景会将<span class="token operator">/</span>about路由匹配Test组件
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Test<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>

使用后：路由匹配到后就不会接着往下匹配，所有<span class="token operator">/</span>about路由匹配到的是About组件
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Test<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">{</span><span class="token comment">/* 改行匹配是失效的 */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span>


<span class="token number">5</span>、<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 重定向标签
   将导航到一个新的地址。这个新的地址会覆盖 history 栈中的当前地址，类似服务器端的重定向。

    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">


</span></code></pre></div><p><br><br>
2、多级路由和路由传参</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1</span>、多级路由刷新产生的样式丢失问题
  由于刷新导致请求的地址发生变化，可能会使主页面引入的外部文件请求地址出错。
  解决方案：
  <span class="token operator">|</span><span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;/css/bootstrap.css&quot;</span><span class="token operator">&gt;</span>  <span class="token comment">//去除href后面 './'中的 '.' </span>
  <span class="token operator">|</span><span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;%PUBLIC_URL%/css/bootstrap.css&quot;</span><span class="token operator">&gt;</span>  <span class="token comment">//使用%PUBLIC_URL%，定位至public文件夹（仅React）</span>
  <span class="token operator">|</span>使用HashRouter


<span class="token number">2</span>、路由的模糊匹配和精准匹配：
    <span class="token operator">&lt;</span>Link className<span class="token operator">=</span><span class="token string">&quot;test&quot;</span> to<span class="token operator">=</span><span class="token string">&quot;/about/a/b/c&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    比如以上的路由可以匹配的path：<span class="token operator">/</span>about<span class="token punctuation">,</span><span class="token operator">/</span>about<span class="token operator">/</span>a<span class="token punctuation">,</span><span class="token operator">/</span>about<span class="token operator">/</span>a<span class="token operator">/</span>b<span class="token punctuation">,</span><span class="token operator">/</span>about<span class="token operator">/</span>a<span class="token operator">/</span>b<span class="token operator">/</span>c；
    注意要匹配完整的path，不能是<span class="token operator">/</span>about 或者<span class="token operator">/</span>about<span class="token operator">/</span>x

    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> exact<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    使用精准匹配后，不能够模糊匹配，但是开启之后，多级路由会出现问题。路由开启严格模式后，此路由的二级三级路由都会失效
 


<span class="token number">4</span>、路由传递参数<span class="token operator">--</span>params参数
    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msgObj<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msgObj<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
    注册路由时，声明接收params参数
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/message/detail/:id/:title&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    获取传递过来的params参数
    <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span>title<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params


<span class="token number">5</span>、路由传递参数<span class="token operator">--</span>search参数		
    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msgObj<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;title=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msgObj<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>						
    注册路由时，如果携带的是search参数，无需声明接收，直接注册即可
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/message/detail&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    获取传递过来的search参数
    <span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'querystring'</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>search<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location
    <span class="token comment">//去掉？并处理参数</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span>title<span class="token punctuation">}</span> <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token number">6</span>、路由传递参数<span class="token operator">--</span>state参数		
    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">'/home/message/detail'</span><span class="token punctuation">,</span><span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'009'</span><span class="token punctuation">,</span><span class="token literal-property property">title</span><span class="token operator">:</span>msgObj<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>						
    注册路由时，如果携带的是state参数，无需声明接收，直接注册即可
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/message/detail&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    获取传递过来的state参数
    <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span>title<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state


<span class="token number">7</span>、编程式路由（常用方法）
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/home/XXX'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/home/XXX'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    history 对象通常会具有以下属性和方法：
        length <span class="token operator">-</span> <span class="token punctuation">(</span>number 类型<span class="token punctuation">)</span> history 堆栈的条目数
        action <span class="token operator">-</span> <span class="token punctuation">(</span>string 类型<span class="token punctuation">)</span> <span class="token function">当前的操作</span><span class="token punctuation">(</span><span class="token constant">PUSH</span><span class="token punctuation">,</span> <span class="token constant">REPLACE</span><span class="token punctuation">,</span> <span class="token constant">POP</span><span class="token punctuation">)</span>
        location <span class="token operator">-</span> <span class="token punctuation">(</span>object 类型<span class="token punctuation">)</span> 当前的位置。location 会具有以下属性：
            pathname <span class="token operator">-</span> <span class="token punctuation">(</span>string 类型<span class="token punctuation">)</span> <span class="token constant">URL</span> 路径
            search <span class="token operator">-</span> <span class="token punctuation">(</span>string 类型<span class="token punctuation">)</span> <span class="token constant">URL</span> 中的查询字符串
            hash <span class="token operator">-</span> <span class="token punctuation">(</span>string 类型<span class="token punctuation">)</span> <span class="token constant">URL</span> 的哈希片段
            state <span class="token operator">-</span> <span class="token punctuation">(</span>object 类型<span class="token punctuation">)</span> 提供给例如使用 <span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> state<span class="token punctuation">)</span> 操作将 location 放入堆栈时的特定 location 状态。只在浏览器和内存历史中可用。
        <span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">function</span> 类型<span class="token punctuation">)</span> 在 history 堆栈添加一个新条目
        <span class="token function">replace</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">function</span> 类型<span class="token punctuation">)</span> 替换在 history 堆栈中的当前条目
        <span class="token function">go</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">function</span> 类型<span class="token punctuation">)</span> 将 history 堆栈中的指针调整 n
        <span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">function</span> 类型<span class="token punctuation">)</span> 等同于 <span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">goForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">function</span> 类型<span class="token punctuation">)</span> 等同于 <span class="token function">go</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">block</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">function</span> 类型<span class="token punctuation">)</span> 阻止跳转。


<span class="token number">8</span>、withRouter
    当路由渲染时， withRouter 会将已经更新的 match ， location 和 history 属性传递给被包裹的组件。
    给非路由组件的props绑定match ， location 和 history 属性。
</code></pre></div></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=React" title="标签">#React</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/a87c4e/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">React的基本使用</div></a> <a href="/pages/07bbe9/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">vue中attrs和listeners的使用</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/a87c4e/" class="prev">React的基本使用</a></span> <span class="next"><a href="/pages/07bbe9/">vue中attrs和listeners的使用</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>X match</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.df697a22.js" defer></script><script src="/assets/js/2.7d83501e.js" defer></script><script src="/assets/js/28.01c71cdd.js" defer></script>
  </body>
</html>
